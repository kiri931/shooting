<!doctype html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>提出ビューワー</title>
  <link rel="stylesheet" href="style.css?v=20260113" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.min.css" />
  <link id="cmThemeLink" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/theme/eclipse.min.css" />
</head>

<body>
  <header class="header header-row">
    <div>
      <a class="back" href="index.html">← 一覧へ</a>
      <h1>提出ビューワー</h1>
      <p class="sub">複数のエクスポート/提出JSONを読み込んで、一括確認できます。</p>
    </div>

    <div class="header-actions">
      <div class="controlGroup">
        <label class="themeLabel" for="themeSelect">表示</label>
        <select id="themeSelect" class="select" aria-label="テーマ">
          <option value="auto">自動</option>
          <option value="light">ライト</option>
          <option value="dark">ダーク</option>
        </select>
      </div>

      <div class="controlGroup">
        <label class="themeLabel" for="cmThemeSelect">エディタ</label>
        <select id="cmThemeSelect" class="select" aria-label="エディタテーマ">
          <option value="auto">自動</option>
          <option value="eclipse">Eclipse（明）</option>
          <option value="idea">IDEA（明）</option>
          <option value="neo">Neo（明）</option>
          <option value="material-darker">Material Darker（暗）</option>
          <option value="darcula">Darcula（暗）</option>
          <option value="dracula">Dracula（暗）</option>
          <option value="monokai">Monokai（暗）</option>
        </select>
      </div>

      <label class="btn" for="viewerFiles">ファイルを追加</label>
      <input id="viewerFiles" class="fileInput" type="file" accept="application/json,.json" multiple />
      <button id="clearBtn" class="btn" type="button">クリア</button>
    </div>
  </header>

  <main class="workspace viewer">
    <section class="col">
      <h2 class="h2">読み込み済み</h2>
      <div id="fileList" class="viewerList" aria-label="ファイル一覧"></div>
    </section>

    <section class="col">
      <h2 class="h2">ステップ</h2>
      <div id="stepList" class="viewerList" aria-label="ステップ一覧"></div>
    </section>

    <section class="col">
      <h2 class="h2" id="detailTitle">内容</h2>
      <div class="tabs" role="tablist" aria-label="表示する種類">
        <button class="tab" type="button" role="tab" aria-selected="true" data-view-tab="html">HTML</button>
        <button class="tab" type="button" role="tab" aria-selected="false" data-view-tab="css">CSS</button>
        <button class="tab" type="button" role="tab" aria-selected="false" data-view-tab="js">JavaScript</button>
      </div>
      <div class="viewerCode">
        <textarea id="viewHtml" spellcheck="false"></textarea>
        <textarea id="viewCss" spellcheck="false" hidden></textarea>
        <textarea id="viewJs" spellcheck="false" hidden></textarea>
      </div>

      <details id="compareDetails" class="guideDiffDetails viewerCompareDetails" hidden>
        <summary>比較（新旧差分）</summary>
        <div class="diffControls">
          <div class="controlGroup">
            <label class="themeLabel" for="compareOld">旧</label>
            <select id="compareOld" class="select" aria-label="旧バージョン"></select>
          </div>
          <div class="controlGroup">
            <label class="themeLabel" for="compareNew">新</label>
            <select id="compareNew" class="select" aria-label="新バージョン"></select>
          </div>
          <button id="compareSwapBtn" class="btn" type="button">入れ替え</button>
          <button id="compareRefreshBtn" class="btn" type="button">差分を更新</button>
        </div>
        <div id="compareDiff" class="diffView" aria-label="差分表示"></div>
        <p id="compareHint" class="diffHint"></p>
      </details>

      <div id="viewerMeta" class="status"></div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/xml/xml.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/css/css.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/javascript/javascript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>

  <script src="theme.js?v=20260113"></script>
  <script src="viewer.js?v=20260116"></script>
</body>

</html>
