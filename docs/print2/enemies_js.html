<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>情プロ JavaScript解説（enemies.js）</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header class="site-header">
    <div class="toolbar">
      <button id="toggle-preview">プレビュー表示</button>
      <button id="show-answers">答えを表示</button>
    </div>
  </header>

  <main>
    <h1>情プロ シューティングゲーム用Javascript No.2（enemies.js）</h1>

    <pre><code class="code-sample">
export const enemies = [];
const SIZE = 50;
const enemyImage = new Image();
enemyImage.src = "enemy.png";

function pushEnemies(canvas) {
  const w = SIZE;
  const h = SIZE;
  const x = Math.random() * (canvas.width - w);
  const y = 0;
  const vy = 5

  enemies.push({ x, y, width: w, height: h, vy });
}

export function spawnEnemy(canvas) {
 if (enemies.length < 10) {
    pushEnemies(canvas);
 }
}

export function updateEnemies(canvas) {
  for (let i = enemies.length - 1; i >= 0; i--) {
    const e = enemies[i];
    e.y += e.vy;
    if (e.y > canvas.height) {
      enemies.splice(i, 1);
    }
  }
}

export function drawEnemies(ctx) {
  for (const e of enemies) {
     ctx.drawImage(enemyImage, e.x, e.y, e.width, e.height);
  }
}
    </code></pre>

    <h2>基礎の穴埋め問題</h2>
    <ol>

      <li>
        <span class="code-sample">export const enemies = [];</span> は、
        <span class="fill-blank" data-answer="敵キャラを保存する配列"></span>
        を他ファイルに公開しています。
      </li>

      <li>
        <span class="code-sample">SIZE = 50</span> は敵の
        <span class="fill-blank" data-answer="大きさ"></span> を表します。
      </li>

      <li>
        敵画像は <span class="code-sample">enemy.png</span> で、
        読み込みには <span class="fill-blank" data-answer="new Image()"></span> を使います。
      </li>

      <li>
        <span class="code-sample">pushEnemies()</span> は敵を
        <span class="fill-blank" data-answer="1体作って配列に追加する"></span>
        非公開関数です。
      </li>

      <li>
        <span class="code-sample">Math.random() * (canvas.width - w)</span> は、
        敵を画面の
        <span class="fill-blank" data-answer="ランダムな位置"></span> に作ります。
      </li>

      <li>
        <span class="code-sample">spawnEnemy()</span> は敵を
        <span class="fill-blank" data-answer="最大10体まで"></span> 出します。
      </li>

      <li>
        <span class="code-sample">updateEnemies()</span> は敵を
        <span class="fill-blank" data-answer="下方向に動かす"></span> 処理です。
      </li>

      <li>
        敵が画面外に出たら <span class="code-sample">splice</span> で
        <span class="fill-blank" data-answer="配列から削除"></span> します。
      </li>

      <li>
        <span class="code-sample">drawEnemies()</span> は全ての敵を
        <span class="fill-blank" data-answer="canvas に描画"></span> します。
      </li>

    </ol>

    <h2>応用問題</h2>
    <ol>
      <li>
        敵のスピードを 5 から 10 にしたい場合、どの変数を変更する？  
        <span class="fill-blank" data-answer="vy"></span>
      </li>

      <li>
        敵の数をもっと増やしたい場合、どこの値を変更すれば良いか？  
        <span class="fill-blank" data-answer="spawnEnemy 内の enemies.length < 10"></span>
      </li>

      <li>
        敵を大きくしたいならどこを直す？  
        <span class="fill-blank" data-answer="SIZE"></span>
      </li>

      <li>
        同じ画像ではなく、複数種類の敵を作りたい場合、どの関数を改造すると良いか？  
        <span class="fill-blank" data-answer="pushEnemies()"></span>
      </li>
    </ol>

  </main>

  <script src="ui.js"></script>
</body>

</html>
